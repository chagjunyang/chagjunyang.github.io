---
layout: post
title: Hybrid App 개념
categories: [하이브리드]
tags: [하이브리드]
description: 네이티브와으 차이점과 기본개념 설명
comments: true
---

# Hybrid App에 대한 조사
## 서론
* 현재 스마트폰 업계는 Android, iOS가 전세계를 대부분 점유하고 있다.
* 이 스마트폰 세계에서 제대로 살아남으려면 두 OS에 대해 모두 대응해야 한다.
* 하지만, 각 OS에 대응하기 위해 언어를 따로 익혀야 하며, 다른 플랫폼 기술을 이용해야 하므로 개발기간과 비용이 증가하게 된다.
* 이런 단점을 보완하고자 여러가지 앱 개발 방식이 생겨나게 되었다.

## Native App
* 특정 플랫폼에서 `지원하는 언어`와 플랫폼에 `종속적인 컴포넌트`를 이용해서 만든 앱
* Android : JAVA, (C,C++) / Activity, BroadcastReceiver...
* iOS : Objective-C, Swift / AppDelegate, NotificationCenter...
* 플랫폼에서 지원하는 `모든 기능을 마음껏 이용`할 수 있다.
* 통화, 푸쉬 알림, GPS,카메라...
* 앱의 실행속도가 `가장 빠르다.`
* 인터넷이 사용가능하지 않아도 앱을 사용할 수 있다.
* `개발기간, 비용이 크다.`

## Web App
* HTML, CSS, JS 등을 가지고, 모바일 UI/UX처럼 동작하도록 렌더링하여 `진짜 앱인것 처럼` 보여주는 웹페이지(앱)
* 일반적으로 모바일웹은 모바일에 맞게 화면만 리사이징한 웹페이지
* 거의 비슷한 개념이므로 단어를 혼용해서 사용하기도 한다.
* 플랫폼에서 지원하는 `기능을 직접 사용할 수 없다.`
* 한번만 개발하면 `어느 플랫폼에서든 사용`할 수 있다.
* 앱의 속도는 `인터넷 속도에 영향`을 받는다.
* 인터넷을 사용할 수 없으면 사용할 수 없다.(결국은 그냥 웹페이지이므로)
* 앱스토어에 올릴 수 없다.
* `개발기간, 비용이 상대적으로 작다.`

## Hybrid App
* HTML, CSS, JS 등을 가지고, 서브화면을 구성한 후에, 그것을 각 플랫폼의 네이티브 컴포넌트로 래핑한 앱
* 웹 앱처럼 서버의 스크립트를 불러오는 것이 아니라, 필요한 `스크립트를 미리 로컬에 저장`해놓고, 저장된 스크립트를 호출하는 방식으로 구현한다.
* 일반적인 하이브리드 앱의 구현방법은 아니지만, 웹 서버에서 스크립트를 로드하는 방식으로도 구현할 수는 있다.
* 네이티브 앱 + 웹 앱 이라고 생각하면 될 것 같다.
* 구현 방법은 개발자의 취향, 앱의 성격에 따라 많이 다르겠지만 일반적으로는 `네이티브 컴포넌트`를 이용해 기기제어 둥의 처리를 하고, `웹뷰`를 이용해 서버의 데이터를 가공한 스크립트를 보여주어 화면을 구성하는 형태로 되어있다.
* 웹뷰 -> 네이티브앱 데이터 전달 방식
* iOS : 웹뷰의 `stringByEvaluatingJavaScriptFromString` 메서드를 이용해 전달.
* Android : 웹뷰의 `loadUrl` 메서드를 이용해 전달.

```obj-c
// IOS
NSString* status = [[NSString alloc] initWithFormat:@"%@({ code: %d, message: '%@'});", callback, code, message];  
[webView stringByEvaluatingJavaScriptFromString:status];
```

```java
// Android
webView.loadUrl("javascript:hello");
```

* 웹뷰 <- 네이티브앱 데이터 전달 방식
* iOS : `Custom Scheme`을 웹뷰에서 호출하여 해당 네이티브 코드를 실행
* Android : `addJavascriptInterface` 메서드를 이용해 자바스크립트에서 이용할 클래스&메서드를 등록한다.

```
// In Script
<a href="Custom Scheme">커스텀 스킴 호출</>

// Script Rule
yourscheme://<class>.<command></command>/[<arguments>][?<dictionary>]  
</dictionary></arguments></class>
```
```java
// In Java
webView.addJavascriptInterface(new MyHibrid(), "MyHybrid");

Class MyHybrid {  
public String hello(){  
return "Hello hybrid App";  
}
}

// In Script
<script>
alert(MyHybrid.hello());
</script>
```
* 플랫폼에서 지원하는 `기술을 거의 다 이용`할 수 있다.
* 웹앱과는 달리 앱스토어에 올릴 수 있다. (경우에 따라 `In App Purchase` 상품도 이용할 수 있다.)
* 인터넷이 사용가능하지 않더라도 `어느정도는 앱을 사용`할 수 있다.
* `개발기간, 비용이 합리적이다.`(네이티브 앱과 웹 앱의 중간정도)


## Hybrid App Framework
* Hybrid App을 쉽게 제작할 수 있도록 고안된 프레임워크
* 하이브리드 앱의 화면을 구성하기 위한 HTML,CSS,JS로 만들어진 위젯을 모아놓은 프레임워크, 웹언어에서 네이티브 통신을 담당해 앱으로 빌드해주는 프레임워크로 구분된다.
* 화면구성 프레임워크 : IONIC, jQuery Mobile, Sencha Touch, Mobile Angular UI 등..
* 앱 빌드 프레임워크 : PhoneGap, Titanum Mobile, Appspresso
* 하이브리드 앱을 개발하는 위해서는 IONIC등의 화면구성 프레임워크를 이용해 화면을 그리고, 그 화면을 PhoneGap등의 빌드 프레임워크를 이용해 앱으로 빌드한다.

## Hybrid App vs Native App 선택 기준

- 이미 완성된 프로젝트의 UI가 자주 바뀐다면 하이브리드 고려
- 성능이나 베터리 문제가 중요하다면 네이티브
- 대부분 비용과 유지보수 측면에서 하이브리드 앱 선택

## 마치며
* 하이브리드 앱을 개발하려면 웹 언어에 대한 정확한 이해, 웹뷰에 대한 정확한 이해가 필요할 것으로 보인다. 어정쩡하게 시작하면 오히려 네이티브앱보다도 개발속도가 느릴 것입니다.(성능은 물론 떨어지고...)
* 하나의 소스로 iOS, Android를 동시에 이용할 수 있기 때문에 개발인력을 절약할 수 있을 것입니다.

## 참고자료
* [네이버 D2 - PhoneGap을 이용한 앱 개발](http://d2.naver.com/helloworld/8180)
* [하이브리드 앱 개요](http://www.nam.or.kr/archives/21495)
* [모바일개발랩-신입교육/97 하이브리드 앱 플랫폼 조사](dooray://1387695619080878080/tasks/1662944633814896761 "closed")
