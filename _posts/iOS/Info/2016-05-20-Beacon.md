---
layout: post
title: Beacon 정리
categories: [iOS]
tags: [iOS 정보]
description: Beacon의 개념과 사용법 정리
comments: false

---

# BLE

- Bluetooth 4.0 프로토콜
- Bluetooth Low Energy의 약자로 3.0에 비해 전력소모가 적은것이 가장 큰 특징
- BLE디바이스는 

### 통신 방식

- Advertise Mode (=Broadcast Mode)
- 특정 디바이스를 지정하지 않고 주변의 모든 디바이스에게 Signal을 보낸다
- 적은 양의 데이터를 보낼 때 굳이 오버헤드가 큰 Connection과정을 거치지 않고 브로드캐스트로 데이터 전송 가능
- 아이비콘이 해당 모드를 이용하는 방식

<img src="/assets/media/iOS/Beacon1.png">

- Connection Mode
- Central (Master) : `Connectable Advertising Signal`을 주기적으로 스캔하여 원하는 디바이스나오면 연결시도
- Peripheral (Slave) :  `Connectable Advertising Signal`을 주기적으로 전송하여 연결할 수 있도록 한다.
- 양방향 통신이나 브로드캐스트만으로 데이터 전달하기에 (31 Bytes 이하) 부족 할 경우 사용
- 브로드캐스트 처럼 `일대다`방식이 아닌 `일대 일` 방식

- Advertise Mode와 Connection Mode는 동시에 사용 불가

# Beacon

## 정의

- [출처](https://ko.wikipedia.org/wiki/비콘), [비콘타입](https://en.wikipedia.org/wiki/Types_of_beacons#Types_of_Beacon_protocols)
- 위치 등을 알리기 위해 일정한 신호를 전송하는 기기
- 블루투스를 사용할수도, wifi를 사용할 수도 있음

## iBeacon

- Beacon의 첫 공식 프로토콜
- 애플이 2013년도에 발표
- BLE 통신규약에 근거하여 다양한 정보를 송수신하는 `위치 기반 서비스
- Advertiser 디바이스가 존재 
- Advertiser는 iBeacon 스펙에 따라야 iOS기기에서 인식 가능

### 스펙

1. UUID : 16byte, 한개 비콘을 식별하거나 특정 유형 또는 특정 조직의 비콘을 식별하는 역할을 함 
2. Major : 2byte, 동일한 UUID를 가진 비콘들을 구분하기 위해 사용  (1~65535의 int값 )
3. Minor : 2byte, 동일한 더욱 더 세분화해서 식별 가능( (1~65535의 int값 )

### iOS 지원 스펙

- iPhone 4S, iPad 3, iPod touch 5, iPad mini 이상 기기
- iOS 7 이상
- Bluetooth 4.0 (Bluetooth BLE) 이상

## iBeacon Scan

[가이드](https://developer.apple.com/documentation/corelocation/determining_the_proximity_to_an_ibeacon?language=objc)

### Monitoring

- 비콘의 영역 내/외부를 판단하는 행위
- 앱의 실행 유무와 상관없는 위치 서비스와 백그라운드 위치 갱신 서비스의 설정이 선행된 후에 가능한 기능
- 이에 대해 애플의 공식 문서는 다음과 같이 언급

<img src="/assets/media/iOS/Beacon2.png">

- Monitoring 을 통해 현재 디바이스가 비콘의 영역의 내부에 있다는 것이 판단되면 Ranging 을 통해 해당 비콘과의 근접도를 판단합니다.
- 근접도가 필요없다면 Ranging을 안해도 가능


### Ranging

- 비콘과의 거리(근접도)를 측적하는 행위
- 백그라운드, 포그라운드에서 동작하지만 Terminate상태에서 동작하지 않음


## 비콘 인식에 필요한 환경

- 위치서비스 및 비콘 지원 기기인가
- 위치서비스는 켜져있는가
- 비행모드는 꺼저있는가
- 권한은 설정되어있는가


## 권한

[Location and Maps Programming Guide](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/LocationAwarenessPG/RegionMonitoring/RegionMonitoring.html)
[Location 권한 선택 가이드](https://developer.apple.com/documentation/corelocation/choosing_the_authorization_level_for_location_services?language=objc)

- 비콘을 사용하기 위해 Blutooth권한은 필요없음
- 위치서비스 기능만 이용
- 위치서비스 접근 권한은 크게 2가지로 구분
- When-In-Use
- Always
- Monitoring을 위해서는 Always권한이 필요

<img src="/assets/media/iOS/Beacon3.png" width='450'/>
<img src="/assets/media/iOS/Beacon4.png" width='450'/>


[Requesting Always Authorization](https://developer.apple.com/documentation/corelocation/choosing_the_authorization_level_for_location_services/requesting_always_authorization?language=objc)

### 1. plist등록

<img src="/assets/media/iOS/Beacon5.png">

- NSLocationWhenInUseUsageDescription key and the NSLocationAlwaysAndWhenInUseUsageDescription key to your Info.plist file.
- iOS 10 이하도 지원하는 앱이라면 NSLocationAlwaysUsageDescription 키도 추가

### 2. Background 확성화

<img src="/assets/media/iOS/Beacon6.png">

- project target > Bacground Mode > Location update set Enable

### 3. 권한 요청 코드 실행

- CLLocationManager >  requestAlwaysAuthorization 호출

<img src="/assets/media/iOS/Beacon7.png">


<br/>
<br/>

# iOS iBeacon Observer Program Guide

[iBeacon 가이드](https://developer.apple.com/ibeacon/Getting-Started-with-iBeacon.pdf)

## 0. 프로젝트 info.plist 설정

- 위치서비스 사용을 위한 권한설정이 필수

![image](data:image/png;base64,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)

## 1. Observer로 동작가능한 상태인지 상태 확인

- 다음의 경우에 대해 생각해야함
1. 사용자의 기기에서 위치서비스 or Beacon을 지원하지 않을 경우
2. 앱의 접근 권한을 허용하지 않을 경우
3. 위치서비스 자체를 끌 경우
5. 디바이스가 Airplane mode 일 경우

### 위치서비스 접근 권한 확인

- kCLAuthorizationStatusNotDetermined : 아직 거부도, 승인도 안한 상태
- kCLAuthorizationStatusDenied :  거부
- kCLAuthorizationStatusAuthorizedWhenInUse : 앱을 사용하는동안 권한 허용


## 2. Regions

- 비콘을 탐색하기위해서 UUID값을 알아야함
- Region객체는 Advertise하고있는 특정 UUID 비콘신호1개에 해당
- 여러 UUID신호를 탐색하려면 여러 Region객체를 생성해서 모니터링해야함


### CLBeaconRegion 객체 생성 3가지

- `(instancetype)initWithProximityUUID:(NSUUID *)proximityUUID identifier:(NSString *)identifier`
- `(instancetype)initWithProximityUUID:(NSUUID *)proximityUUID major:(CLBeaconMajorValue)major identifier:(NSString *)identifier`
```objc
-(instancetype)initWithProximityUUID:(NSUUID *)proximityUUID
major:(CLBeaconMajorValue)major
minor:(CLBeaconMinorValue)minor
identifier:(NSString *)identifier
```

- identifier 파라미터 : 한 앱에 여러 region객체들이 있을 경우 (하나의 앱에서 여러 비콘 인식해야 할 경우) 각 객체간 식별을 위한 식별자 ex) `com.629.lotteria1` 

## 3. 모니터링 시작

- `(void)startMonitoringForRegion:(CLRegion *)region`
- 모니터링은 비콘영역에 들어갔다, 나왔다, 모른다 3가지 상태만 모니터링
- 백그라운드에서 모니터링 동작 가능

``` objc
-(void)locationManager:(CLLocationManager *)manager didDetermineState:(CLRegionState)state forRegion:(CLRegion *)region
{
    if (state == CLRegionStateInside) {
        [self.logLabel setText:@"CLRegionStateInside"];
        [self.locationManager startRangingBeaconsInRegion:_myBeaconRegion];
    }else if(state == CLRegionStateOutside){
        [self.logLabel setText:@"CLRegionStateOutside"];
        [self.locationManager stopRangingBeaconsInRegion:self.myBeaconRegion];
    }else{
        [self.logLabel setText:@"CLRegionState Unkown"];
    }
}
```

## 4. Ranging 시작

- 실제 비콘과의 거리를 측정하려면 ranging이 필요

``` objc
- (void)startRangingBeaconsInRegion:(CLBeaconRegion *)region;

-(void)locationManager:(CLLocationManager*)manager didRangeBeacons:(NSArray*)beacons inRegion:(CLBeaconRegion*)region
{
    for(CLBeacon *beacon in beacons)
    {
        if ([self.myBeaconRegion.proximityUUID isEqual:beacon.proximityUUID])
        {
            [self.UUIDLabel setText:beacon.proximityUUID.UUIDString];
            [self.majorLabel setText:beacon.major.stringValue];
            [self.minorLabel setText:beacon.minor.stringValue];
            
            ...
```
